#!/usr/bin/env sh
pnpm install

# Generate icon types initially
pnpm run icons:generate

# Start interpreters watch in background
(cd ../interpreters && pnpm run dev) &
INTERPRETERS_PID=$!

# Start curriculum watch in background
(cd ../curriculum && pnpm run dev) &
CURRICULUM_PID=$!

# Start icon type generation watch in background
pnpm run icons:watch &
ICONS_PID=$!

# Start Next.js dev server
pnpm dev

# Kill background processes when this script exits
trap "kill $INTERPRETERS_PID $CURRICULUM_PID $ICONS_PID 2>/dev/null" EXIT